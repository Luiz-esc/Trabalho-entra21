<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/normalize.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/css/style_turmas.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+SC&display=swap" rel="stylesheet">
    <title>Turmas | Colégio SAC</title>
</head>
<body class="css-selector">
    <header>
        <nav id="nav">
            <div class="container-nav">
            <ul id="lista-nav">
                <li class="swing"><img id="logo" src="../static/images/Logo_noTittle_1000x800.png" alt=""></li>
                <li><a id="titulo-home" href="index.html"><p id="lista-nome">Home</p></a></li>
                <li><a id="titulo-home" href="turmas.html"><p id="lista-nome">Turmas</p></a></li>
            </ul>
        </div>
    </header>

        <div class="buttons">
            <p>Código Turma</p>
            <input type="text" id="codigoTurma" required placeholder=" Código da Turma">
            <p>Nome da Turma (4 a 15 caracteres)</p>
            <input type="text" id="nomeTurma" minlength="4" maxlength="15" required  placeholder=" Nome da Turma">
            <p></p>
            <input type="submit" id="sub">
        </div>

        <div class="divTurmas"></div>

        <script  src="../static/js/classes.js"> </script>
        <script>
         let submit = document.querySelector("#sub"),
                codigoTurma = document.querySelector("#codigoTurma"),
                nomeTurma = document.querySelector("#nomeTurma")

            submit.addEventListener('click', (event) => {
                if(codigoTurma.value == ""){
                    alert("Código Inválido")
                    return
                } else if (nomeTurma.value == ""){
                    alert("Nome Inválido")
                    return
                }
                cadastrarTurma(codigoTurma.value  ,nomeTurma.value)
                document.location.reload(true);
            })

            window.addEventListener("load", (event) => {
                let turmas = JSON.parse(localStorage.getItem("turmasVetor")),
                    divTurmas = document.querySelector(".divTurmas")
                
                for (let turma of turmas) {
                    const linkTurma = document.createElement("a")
    
                    linkTurma.href = `alunos.html?codigoTurma=${turma.codigoTurma}`
                    linkTurma.innerHTML = "Nome da Turma: " + (turma.nomeTurma || "Sem Nome" ) + "<br>" + "Código da Turma: " + (turma.codigoTurma || "Sem")
    
                    divTurmas.append(linkTurma)
                }
                })
        </script>
</body>
</html>