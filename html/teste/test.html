<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Cadastrar Aluno</h2>
        <p>Matricula:</p>
        <input id="matricula2" type="text"><br><br>
        <p>Nome:</p>
        <input type="text" id="nome"><br><br>
        <p>Telefone:</p>
        <input type="text" id="telefone"><br><br>
        <p>Email:</p>
        <input type="email" id="email"><br><br>
        <input type="submit" id="sub2" value="       ">

    <h2>Cadastrar Notas</h2>
        <p>Matricula:</p>
        <input id="matricula3" type="text"><br><br>
        <p>Notas:</p>
        <input type="number" id="nota1">
        <input type="number" id="nota2">
        <input type="number" id="nota3"><br><br>
        <input type="submit" id="sub3" value="       ">

    <h2>Calcular Média</h2>
    <p>Matricula:</p>
        <input type="text" id="matricula4"><br><br>
        <input type="submit" id="sub4" value="       ">
    
    <h2>Remover aluno</h2>
    <form action="#">
        <p>Matricula:</p>
        <input id="matricula" type="text"><br><br>
        <input type="submit" id="sub" value="       ">
    </form>
    <script>

        let submit = document.getElementById("sub")

        submit.addEventListener("click", (event) =>{
           let  matricula = document.querySelector("#matricula")


                turma1.removerAluno(+matricula.value)
        })

        let submit2 = document.getElementById("sub2")

        submit2.addEventListener("click", (event) =>{
        let nome = document.querySelector("#nome"),   
            matricula2 = document.querySelector("#matricula2"),   
            telefone = document.querySelector("#telefone"),
            email = document.querySelector("#email") 
                turma1.cadastrarAluno(+matricula2.value, nome.value, telefone.value, email.value)
        })

        let submit3 = document.getElementById("sub3")

        submit3.addEventListener("click", (event) =>{
        let matricula3 = document.querySelector("#matricula3"),
            nota1 = document.querySelector("#nota1"),
            nota2 = document.querySelector("#nota2"),
            nota3 = document.querySelector("#nota3")
            turma1.cadastraNotas(+matricula3.value, +nota1.value, +nota2.value, +nota3.value)
        })
        let submit4 = document.getElementById("sub4")

        submit4.addEventListener("click", (event) =>{
        let matricula4 = document.querySelector("#matricula4")
            alert(turma1.calcularMedia(+matricula4.value))
        })

    let turmas = []

    let cadastrarTurma = (codigoTurma, nomeTurma) => {
        turmas.push(new Turma(codigoTurma, nomeTurma))
    }
    
        class Turma {
    constructor(codigoTurma, nomeTurma) {
        this.codigoTurma = codigoTurma
        this.nomeTurma = nomeTurma
        this.alunos = []
    }

    cadastrarAluno(matricula, nome, telefone, email) {
        for (let aluno of this.alunos) {
            if (aluno.matricula == matricula) 
            return alert("Essa matricula já está sendo ultilizada")
        } 
        this.alunos.push(new Aluno(matricula, nome, telefone, email))   
    }

    removerAluno(matricula) {
        for (let i = 0; i < this.alunos.length; i++) {
            if (this.alunos[i].matricula == matricula) {
                this.alunos.splice(i, 1)
            }
        }
    }

    cadastraNotas(matricula, n1, n2, n3) {
        for (let aluno of this.alunos) {
            if (aluno.matricula == matricula) {
                aluno.notas = [n1, n2, n3]
            }
        }
    }

    editarInformações(matricula, nome, telefone, email) {
        for (let aluno of this.alunos) {
            if (aluno.matricula == matricula) {
                aluno.nome = nome
                aluno.telefone = telefone
                aluno.email = email
            }
        }
    }

    calcularMedia(matricula) {
        for (let aluno of this.alunos) {
            if (aluno.matricula == matricula) {
                return (aluno.notas[0] + aluno.notas[1] + aluno.notas[2]) / 3
            }
        }
    }
}

class Aluno {
    constructor(matricula, nome, telefone, email) {
        this.matricula = matricula
        this.nome = nome
        this.telefone = telefone
        this.email = email
        this.notas = []
    }
}
let turma1 = new Turma(01, "Turma 1")

turma1.cadastrarAluno(123, "Luiz", "99999-9999", "luiz@luiz.luiz")
turma1.cadastrarAluno(321, "joao", "9312499-9999", "maria@luiz.luiz")
turma1.cadastrarAluno(333, "aaaaa", "91219-9999", "luiz@joao.luiz")


    // Obter o codigo da turma
    const codigoTurma = +new URLSearchParams(location.search).get("codigoTurma")

    const turmas2 = JSON.parse(localStorage.getItem("turmas"))

    for (let turma of turmas2) {
        if (turma.codigoTurma === codigoTurma) {
            for (let aluno of turma.alunos) {
                const pAluno = document.createElement("p")
                pAluno.innerHTML = aluno.nome
                document.body.append(pAluno)
            }
            break
        }        
    }


    </script>    
</body>
</html>